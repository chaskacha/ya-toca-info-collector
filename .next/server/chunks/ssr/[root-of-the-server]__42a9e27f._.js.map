{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file:///Users/chaskacha/Desktop/projects/ya_toca/ya_toca_backup_info_collector/src/components/Composer.tsx"],"sourcesContent":["'use client';\nimport React, { useRef, useState } from 'react';\nimport type { MessagePayload, UploadAudio, UploadImage } from '@/lib/types';\n\n\nasync function fileToDataUrl(file: File): Promise<string> {\n    return new Promise((res, rej) => {\n        const r = new FileReader();\n        r.onload = () => res(String(r.result));\n        r.onerror = rej;\n        r.readAsDataURL(file);\n    });\n}\n\nexport default function Composer({ kind, placeholder }: { kind: MessagePayload['type']; placeholder?: string }) {\n    const [text, setText] = useState('');\n    const [images, setImages] = useState<UploadImage[]>([]);\n    const [audio, setAudio] = useState<UploadAudio>(null);\n    const [busy, setBusy] = useState(false);\n    // Audio recorder\n    const mediaRecorder = useRef<MediaRecorder | null>(null);\n    const chunks = useRef<Blob[]>([]);\n    const [recording, setRecording] = useState(false);\n    const startRec = async () => {\n        if (recording) return;\n        const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n        const mr = new MediaRecorder(stream);\n        mediaRecorder.current = mr;\n        chunks.current = [];\n        mr.ondataavailable = (e) => { if (e.data.size) chunks.current.push(e.data); };\n        mr.onstop = async () => {\n            const blob = new Blob(chunks.current, { type: 'audio/webm' });\n            const dataUrl = await fileToDataUrl(new File([blob], 'audio.webm'));\n            setAudio({ mime: 'audio/webm', dataUrl });\n            stream.getTracks().forEach(t => t.stop());\n        };\n        mr.start();\n        setRecording(true);\n    };\n\n    const stopRec = () => { mediaRecorder.current?.stop(); setRecording(false); };\n\n\n    const onPickImages = async (files: FileList | null) => {\n        if (!files) return;\n        const selected: UploadImage[] = [];\n        for (const f of Array.from(files).slice(0, 5)) {\n            const dataUrl = await fileToDataUrl(f);\n            selected.push({ filename: f.name, dataUrl });\n        }\n        setImages((prev) => [...prev, ...selected]);\n    };\n\n    const submit = async () => {\n        setBusy(true);\n        try {\n            const payload: MessagePayload = { type: kind, text: text.trim() || undefined, images: images.length ? images : undefined, audio };\n            const res = await fetch('/api/messages', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });\n            const j = await res.json();\n            if (!res.ok) throw new Error(j.error || 'Error');\n            setText(''); setImages([]); setAudio(null);\n            alert('¬°Enviado!');\n        } catch (e: any) {\n            alert(e.message || 'Error');\n        } finally { setBusy(false); }\n    };\n\n    return (\n        <div className=\"space-y-4\">\n            <textarea className=\"input min-h-[120px]\" placeholder={placeholder ?? 'Escribe aqu√≠‚Ä¶ (puedes usar emojis)'} value={text} onChange={(e) => setText(e.target.value)} />\n\n\n            <div className=\"space-y-2\">\n                <label className=\"label\">Stickers/Im√°genes (hasta 5)</label>\n                <input type=\"file\" accept=\"image/*\" multiple onChange={(e) => onPickImages(e.target.files)} />\n                {images.length > 0 && (\n                    <div className=\"flex gap-2 flex-wrap\">\n                        {images.map((img, i) => (\n                            <img key={i} src={img.dataUrl} alt=\"preview\" className=\"w-16 h-16 rounded-lg object-cover border\" />\n                        ))}\n                    </div>\n                )}\n            </div>\n            <div className=\"space-y-2\">\n                <label className=\"label\">Audio</label>\n                {!recording ? (\n                    <button type=\"button\" className=\"btn\" onClick={startRec}>üéôÔ∏è Grabar</button>\n                ) : (\n                    <button type=\"button\" className=\"btn\" onClick={stopRec}>‚èπÔ∏è Terminar</button>\n                )}\n                {audio && <p className=\"help\">Audio listo para enviar ({audio.mime}).</p>}\n            </div>\n\n\n            <button className=\"btn\" onClick={submit} disabled={busy}>Enviar</button>\n        </div>\n    );\n}\n\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 241, "column": 0}, "map": {"version":3,"sources":["file:///Users/chaskacha/Desktop/projects/ya_toca/ya_toca_backup_info_collector/src/app/cabildos/station-one/page.tsx"],"sourcesContent":["'use client';\nimport Composer from '@/components/Composer';\nexport default function Page() {\n    return (\n        <div className=\"card space-y-3\">\n            <h2 className=\"text-xl font-semibold\">Estaci√≥n 1: La catarsis</h2>\n            <p className=\"help\">Cu√©ntanos c√≥mo te sentiste despu√©s de la conversaci√≥n‚Ä¶</p>\n            <Composer kind=\"station1\" />\n        </div>\n    );\n}"],"names":[],"mappings":";;;;AACA;AADA;;;AAEe,SAAS;IACpB,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAG,WAAU;0BAAwB;;;;;;0BACtC,8OAAC;gBAAE,WAAU;0BAAO;;;;;;0BACpB,8OAAC,8HAAA,CAAA,UAAQ;gBAAC,MAAK;;;;;;;;;;;;AAG3B","debugId":null}},
    {"offset": {"line": 288, "column": 0}, "map": {"version":3,"sources":["file:///Users/chaskacha/Desktop/projects/ya_toca/ya_toca_backup_info_collector/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":";AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,MAAQ;;AAEzC,OAAO;IACL,IAAIF,QAAQC,GAAG,CAACK,uBAA2B,EAAF;;IAczC,OAAO;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;YAEP;QACF,OAAO;;QAMP;IACF;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 311, "column": 0}, "map": {"version":3,"sources":["file:///Users/chaskacha/Desktop/projects/ya_toca/ya_toca_backup_info_collector/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = require('../../module.compiled').vendored[\n  'react-ssr'\n].ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":";AAAAA,OAAOC,OAAO,GAAGC,QAAQ,4HAAyBC,QAAQ,CACxD,YACD,CAACC,kBAAkB","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 318, "column": 0}, "map": {"version":3,"sources":["file:///Users/chaskacha/Desktop/projects/ya_toca/ya_toca_backup_info_collector/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = require('../../module.compiled').vendored['react-ssr'].React\n"],"names":["module","exports","require","vendored","React"],"mappings":";AAAAA,OAAOC,OAAO,GAAGC,QAAQ,4HAAyBC,QAAQ,CAAC,YAAY,CAACC,KAAK","ignoreList":[0],"debugId":null}}]
}